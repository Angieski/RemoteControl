<!DOCTYPE html>
  <html>
  <head>
      <title>Teste Remote Control Relay AWS</title>
      <style>
          body { font-family: Arial; padding: 20px; }
          .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
          .success { background: #d4edda; color: #155724; }
          .error { background: #f8d7da; color: #721c24; }
          .info { background: #d1ecf1; color: #0c5460; }
      </style>
  </head>
  <body>
      <h1>ğŸš€ Teste Remote Control Relay - AWS</h1>
      <div id="status" class="status info">Inicializando...</div>
      <div id="logs"></div>

      <script>
          const statusDiv = document.getElementById('status');
          const logsDiv = document.getElementById('logs');

          function addLog(message) {
              const time = new Date().toLocaleTimeString();
              logsDiv.innerHTML += `<div>[${time}] ${message}</div>`;
          }

          addLog('ğŸ“¡ Conectando ao servidor AWS...');

          const ws = new WebSocket('ws://54.232.138.198:8080');

          ws.onopen = function() {
              statusDiv.className = 'status success';
              statusDiv.innerHTML = 'âœ… Conectado com sucesso ao servidor AWS!';
              addLog('âœ… ConexÃ£o WebSocket estabelecida');

              // Enviar mensagem de teste
              ws.send(JSON.stringify({
                  type: 'register',
                  clientType: 'test-browser',
                  version: '1.0.0'
              }));
          };

          ws.onmessage = function(event) {
              const data = JSON.parse(event.data);
              addLog('ğŸ“¨ Recebido: ' + JSON.stringify(data));

              if (data.type === 'registered') {
                  addLog('ğŸ†” ID gerado: ' + data.clientId);
                  statusDiv.innerHTML += '<br>ğŸ†” Seu ID: ' + data.clientId;
              }
          };

          ws.onerror = function(error) {
              statusDiv.className = 'status error';
              statusDiv.innerHTML = 'âŒ Erro de conexÃ£o';
              addLog('âŒ Erro: ' + error);
          };

          ws.onclose = function() {
              statusDiv.className = 'status info';
              statusDiv.innerHTML = 'ğŸ”Œ ConexÃ£o encerrada';
              addLog('ğŸ”Œ WebSocket fechado');
          };
      </script>
  </body>
  </html>